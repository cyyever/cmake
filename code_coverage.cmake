SET(ENABLE_CODE_COVERAGE FALSE)

if(CMAKE_BUILD_TYPE STREQUAL Debug)
  IF(CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
    set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -fprofile-instr-generate -fcoverage-mapping")
    SET(ENABLE_CODE_COVERAGE TRUE)
  ELSEIF(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
    set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} --coverage")
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} --coverage")
    SET(ENABLE_CODE_COVERAGE TRUE)
  endif()
endif()
